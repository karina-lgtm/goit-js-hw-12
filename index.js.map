{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport async function searchImg(query, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const params = {\n        key: '48901588-d5168312fb6e442ccb66c926a',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page:40 \n    };\n    return await axios.get(BASE_URL, { params })\n};  \n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction imgTemplate({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <ul class=\"image-info\">\n      <li class=\"info-item\"><p class=\"text\">Likes</p><p class=\"text-value\">${likes}</p></li>\n      <li class=\"info-item\"><p class=\"text\">Views</p><p class=\"text-value\">${views}</p></li>\n      <li class=\"info-item\"><p class=\"text\">Comments</p><p class=\"text-value\">${comments}</p></li>\n      <li class=\"info-item\"><p class=\"text\">Downloads</p><p class=\"text-value\">${downloads}</p></li>\n    </ul>\n  </li>`;\n}\n\nexport function imgsTemplate(imgs) {\n  return imgs.map(imgTemplate).join('');\n}\n\nexport function renderGallery(refs, imgs) {\n  refs.gallery.insertAdjacentHTML('beforeend', imgsTemplate(imgs));\n  lightbox.refresh();\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchImg } from './js/pixabay-api.js';\nimport { imgsTemplate, lightbox } from './js/render-functions.js';\n\nexport const refs = {\n    form: document.querySelector('.search-form'),\n    input: document.querySelector('#image-input'),\n    gallery: document.querySelector('.gallery'),\n    btnLoadMore: document.querySelector('.js-load-btn'),\n    loader: document.querySelector('.js-loader')\n};\n\nconst params = {\n  query: '',\n  page: 1,\n  total: null,\n  per_page: 40,\n};\n\nrefs.form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n\n    params.query = refs.input.value.trim();\n    if (!params.query) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    refs.gallery.innerHTML = '';\n    refs.form.reset();\n    hideBtnLoadMore();\n    showLoader();\n    \n    try {\n        const { data } = await searchImg(params.query, params.page, params.per_page);\n        \n        if (data.hits.length === 0) {\n            iziToast.info({\n                message: 'Sorry, no images found. Try again!',\n                backgroundColor: '#ef4040',\n                messageColor: '#fafafb',\n                position: 'topRight',\n            });\n        } else {\n            refs.gallery.innerHTML = imgsTemplate(data.hits);\n            lightbox.refresh();\n\n            params.total = data.totalHits;\n            checkBtnLoadMore();\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Try again.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\nrefs.btnLoadMore.addEventListener('click', async () => {\n    params.page += 1;\n    showLoader();\n\n    try {\n        const { data } = await searchImg(params.query, params.page, params.per_page);\n        refs.gallery.insertAdjacentHTML('beforeend', imgsTemplate(data.hits));\n        lightbox.refresh();\n\n        checkBtnLoadMore();\n        scrollToNewImages();\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Try again.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\nfunction showBtnLoadMore() {\n    refs.btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideBtnLoadMore() {\n    refs.btnLoadMore.classList.add('hidden');\n}\n\nfunction checkBtnLoadMore() {\n    const maxPage = Math.ceil(params.total / params.per_page);\n    if (params.page >= maxPage) {\n        hideBtnLoadMore();\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n        });\n    } else {\n        showBtnLoadMore();\n    }\n}\n\nfunction showLoader() {\n    refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n    refs.loader.classList.add('hidden');\n}\n\nfunction scrollToNewImages() {\n    const { height } = refs.gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: height * 2, \n        behavior: 'smooth'\n    });\n}\n"],"names":["axios","searchImg","query","page","BASE_URL","params","lightbox","SimpleLightbox","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgsTemplate","imgs","refs","e","iziToast","hideBtnLoadMore","showLoader","data","checkBtnLoadMore","hideLoader","scrollToNewImages","showBtnLoadMore","maxPage","height"],"mappings":"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"}