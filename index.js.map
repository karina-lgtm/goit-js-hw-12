{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst API_KEY = \"48859120-c5edc5c574d1328ed42f58f74\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: perPage,\n                page,\n            },\n        });\n\n        if (response.status !== 200) {\n            throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n\n        const { hits, totalHits } = response.data;\n\n        if (hits.length === 0) {\n            iziToast.warning({\n                title: \"No results\",\n                message: \"No images found. Try another search!\",\n            });\n            return { hits: [], totalHits: 0 };\n        }\n\n        return { hits, totalHits };\n\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Failed to fetch images. Try again!\",\n        });\n        console.error(\"Fetch error:\", error);\n        return { hits: [], totalHits: 0 };\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\nexport function renderGallery(images, append = false) {\n    const gallery = document.querySelector(\".gallery\");\n    if (!gallery) return;\n\n    // Ð¯ÐºÑ‰Ð¾ Ð¼Ð°ÑÐ¸Ð² Ð¿Ð¾Ñ€Ð¾Ð¶Ð½Ñ–Ð¹, Ð²Ð¸Ð¹Ñ‚Ð¸ Ð· Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ—\n    if (images.length === 0) return;\n\n    if (!append) {\n        gallery.innerHTML = \"\";\n    }\n\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<a href=\"${largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n            <div class=\"info\">\n                <p><span class=\"label\">Likes:</span> ${likes}</p>\n                <p><span class=\"label\">Views:</span> ${views}</p>\n                <p><span class=\"label\">Comments:</span> ${comments}</p>\n                <p><span class=\"label\">Downloads:</span> ${downloads}</p>\n            </div>\n        </a>`\n    ).join('');\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    // Ð¯ÐºÑ‰Ð¾ lightbox Ñ‰Ðµ Ð½Ðµ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð¸Ð¹, Ñ–Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð·ÑƒÐ²Ð°Ñ‚Ð¸ Ð¹Ð¾Ð³Ð¾\n    if (!lightbox) {\n        lightbox = new SimpleLightbox(\".gallery a\", {\n            captions: true,\n            captionsData: \"alt\",\n            captionDelay: 250,\n        });\n    }\n\n    lightbox.refresh();\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  \n    const form = document.querySelector(\".form\");\n    const gallery = document.querySelector(\".gallery\");\n    const loadMoreBtn = document.querySelector(\"#load-more\");\n    const loader = document.querySelector(\".loader\");\n\n    \n    if (!form || !gallery || !loadMoreBtn || !loader) {\n        console.error(\"âŒ ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ°: ÐžÐ´Ð¸Ð½ Ð°Ð±Ð¾ Ð±Ñ–Ð»ÑŒÑˆÐµ ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ–Ð² Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾.\");\n        console.log(\"ðŸ” Ð¤Ð¾Ñ€Ð¼Ð°:\", form);\n        console.log(\"ðŸ” Ð“Ð°Ð»ÐµÑ€ÐµÑ:\", gallery);\n        console.log(\"ðŸ” ÐšÐ½Ð¾Ð¿ÐºÐ° 'Load More':\", loadMoreBtn);\n        console.log(\"ðŸ” Ð›Ð¾Ð°Ð´ÐµÑ€:\", loader);\n        return;\n    }\n\n    let query = \"\";\n    let page = 1;\n    const perPage = 40;\n\n    form.addEventListener(\"submit\", async (event) => {\n        event.preventDefault();\n        query = event.target.elements.searchQuery.value.trim();\n\n        if (!query) {\n            iziToast.warning({ title: \"Warning\", message: \"Please enter a search term!\" });\n            return;\n        }\n\n        page = 1;\n        gallery.innerHTML = \"\";\n        loadMoreBtn.classList.add(\"hidden\");\n        loader.classList.remove(\"hidden\");\n\n        try {\n            const { hits, totalHits } = await fetchImages(query, page, perPage);\n            loader.classList.add(\"hidden\");\n\n            if (hits.length === 0) {\n                iziToast.error({ message: \"No images found. Try again!\" });\n                return;\n            }\n\n            renderGallery(hits);\n\n            if (perPage < totalHits) {\n                loadMoreBtn.classList.remove(\"hidden\");\n            }\n        } catch (error) {\n            loader.classList.add(\"hidden\");\n            iziToast.error({ message: \"An error occurred. Please try again later!\" });\n        }\n    });\n\n    loadMoreBtn.addEventListener(\"click\", async () => {\n        page += 1;\n        loader.classList.remove(\"hidden\");\n\n        try {\n            const { hits, totalHits } = await fetchImages(query, page, perPage);\n            loader.classList.add(\"hidden\");\n\n            if (hits.length === 0) return;\n\n            renderGallery(hits, true);\n\n            setTimeout(() => {\n                const firstNewItem = document.querySelector(\".gallery-item\");\n                if (firstNewItem) {\n                    const { height: cardHeight } = firstNewItem.getBoundingClientRect();\n                    window.scrollBy({ top: cardHeight * 2, behavior: \"smooth\" });\n                }\n            }, 300);\n\n            if (page * perPage >= totalHits) {\n                loadMoreBtn.classList.add(\"hidden\");\n                iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n            }\n        } catch (error) {\n            loader.classList.add(\"hidden\");\n            iziToast.error({ message: \"Failed to load more images. Try again!\" });\n        }\n    });\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","response","axios","hits","totalHits","iziToast","error","lightbox","renderGallery","images","append","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","form","loadMoreBtn","loader","event","firstNewItem","cardHeight"],"mappings":"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"}