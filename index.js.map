{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport async function searchImg(query, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const params = {\n        key: '48901588-d5168312fb6e442ccb66c926a',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page:40 \n    };\n    return await axios.get(BASE_URL, { params })\n};  \n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nfunction imgTemplate(img) {\n  const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = img;\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${img.webformatURL}\"\n      alt=\"${img.tags}\"\n    />\n  </a>\n  \n  <ul class=\"image-info\">\n      <li class=\"info-item\">\n        <p class=\"text\">Likes</p>\n        <p class=\"text-value\">${img.likes}</p>\n      </li>\n      <li class=\"info-item\">\n        <p class=\"text\">Views</p>\n        <p class=\"text-value\">${img.views}</p>\n      </li>\n      <li class=\"info-item\">\n        <p class=\"text\">Comments</p>\n        <p class=\"text-value\">${img.comments}</p>\n      </li>\n      <li class=\"info-item\">\n        <p class=\"text\">Downloads</p>\n        <p class=\"text-value\">${img.downloads}</p>\n      </li>\n      </ul>\n</li>`\n};\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function imgsTemplate(imgs) {\n  return imgs.map(imgTemplate).join('');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { searchImg } from './js/pixabay-api.js';\nimport { imgsTemplate, lightbox } from './js/render-functions.js';\n\nexport const refs = {\n    form: document.querySelector('.search-form'),\n    input: document.querySelector('#image-input'),\n    gallery: document.querySelector('.gallery'),\n    btnLoadMore: document.querySelector('.js-load-btn'),\n    loader: document.querySelector('.js-loader')\n};\n\nconst params = {\n  query: '',\n  page: 1,\n  total: null,\n  per_page: 40,\n};\n\nrefs.form.addEventListener('submit',async (e) => {\n    e.preventDefault();\n    showLoader();\n\n    params.query = refs.input.value.trim();\n    params.page = 1;\n\n    if (params.query === '') {\n      hideLoader();\n      return;\n    }\n    refs.gallery.innerHTML = '';\n    refs.form.reset();\n    hideBtnLoadMore();\n    \n    try {\n        const result = await searchImg(params.query, params.page,params.per_page);\n        const data = result.data;\n        \n      \n        if (data.hits.length === 0) {\n            iziToast.info({\n                title: '',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                messageColor: '#fafafb',\n                backgroundColor: '#ef4040',\n                messageSize: '16px',\n                position: 'topRight',\n                maxWidth: '432px',\n            });\n        } else {\n            refs.gallery.innerHTML = imgsTemplate(data.hits);\n            lightbox.refresh();\n\n            params.total = data.totalHits;\n            checkBtnLoadMore();\n        }\n        \n    } catch(error) {\n       refs.gallery.innerHTML = '';\n       iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again.',\n        position: 'topRight',\n       });\n    } finally {\n      hideLoader();\n    }\n});\n\nrefs.btnLoadMore.addEventListener('click', async () => {\n    params.page += 1;\n    showLoader();\n\n    try {\n        const result = await searchImg(params.query, params.page, params.per_page);\n        const data = result.data;\n        refs.gallery.insertAdjacentHTML('beforeend', imgsTemplate(data.hits));\n        lightbox.refresh();\n\n        params.total = data.totalHits;\n        \n        checkBtnLoadMore();\n        scrollToNewImages();\n        \n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again.',\n            position: 'topRight',\n        });\n        } finally {\n        setTimeout(() => {\n        hideLoader();\n    }, 5000);\n    }\n});\n\nfunction showBtnLoadMore() {\n     refs.btnLoadMore.classList.remove('hidden');\n}\nfunction hideBtnLoadMore() {\n     refs.btnLoadMore.classList.add('hidden');\n}\nfunction checkBtnLoadMore() {\n    const maxPage = Math.ceil(params.total / params.per_page);\n\n    if (params.page >= maxPage) {\n        hideBtnLoadMore();\n        iziToast.info({\n            title: '',\n            message: 'We\"re sorry, but you\"ve reached the end of search results.',\n            position: 'topRight',\n        });\n    } else {\n    showBtnLoadMore();\n    }\n}\n\nfunction showLoader() {\n    refs.loader.classList.remove('hidden');\n}\nfunction hideLoader() {\n    refs.loader.classList.add('hidden');\n}\n\nfunction scrollToNewImages() {\n    const { height } = refs.gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: height * 2, \n        behavior: 'smooth'\n    });\n}"],"names":["axios","searchImg","query","page","BASE_URL","params","imgTemplate","img","lightbox","SimpleLightbox","imgsTemplate","imgs","refs","showLoader","hideLoader","hideBtnLoadMore","data","iziToast","checkBtnLoadMore","scrollToNewImages","showBtnLoadMore","maxPage","height"],"mappings":"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"}