{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst API_KEY = \"48859120-c5edc5c574d1328ed42f58f74\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: perPage,\n                page,\n            },\n        });\n\n        if (!response.data.hits.length) {\n            return { hits: [], totalHits: 0 };\n        }\n\n        return {\n            hits: response.data.hits,\n            totalHits: response.data.totalHits,\n        };\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Failed to fetch images. Try again!\",\n        });\n        console.error(\"Fetch error:\", error);\n        return { hits: [], totalHits: 0 };\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\nexport function renderGallery(images, append = false) {\n    const gallery = document.querySelector(\".gallery\");\n    if (!gallery) return;\n\n    if (!append) {\n        gallery.innerHTML = \"\";\n    }\n\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<a href=\"${largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"info\">\n                <p><span class=\"label\">Likes:</span> ${likes}</p>\n                <p><span class=\"label\">Views:</span> ${views}</p>\n                <p><span class=\"label\">Comments:</span> ${comments}</p>\n                <p><span class=\"label\">Downloads:</span> ${downloads}</p>\n            </div>\n        </a>`\n    ).join('');\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox(\".gallery a\", {\n            captions: true,\n            captionsData: \"alt\",\n            captionDelay: 250,\n        });\n    }\n    lightbox.refresh();\n}","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\"#search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\"#load-more\");\nconst loader = document.querySelector(\".loader\");\n\nlet query = \"\";\nlet page = 1;\nconst perPage = 40;\nlet lastItemBeforeLoad = null;\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    query = event.target.elements.searchQuery.value.trim();\n\n    if (!query) {\n        iziToast.warning({ title: \"Warning\", message: \"Please enter a search term!\" });\n        return;\n    }\n\n    page = 1;\n    gallery.innerHTML = \"\";\n    loadMoreBtn.classList.add(\"hidden\");\n    loader.classList.remove(\"hidden\");\n\n    const { hits, totalHits } = await fetchImages(query, page, perPage);\n    loader.classList.add(\"hidden\");\n\n    if (hits.length === 0) {\n        iziToast.error({ message: \"No images found. Try again!\" });\n        return;\n    }\n\n    renderGallery(hits);\n\n    if (perPage < totalHits) {\n        loadMoreBtn.classList.remove(\"hidden\");\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    lastItemBeforeLoad = document.querySelector(\".gallery-item:last-of-type\");\n\n    page += 1;\n    loader.classList.remove(\"hidden\");\n\n    const { hits, totalHits } = await fetchImages(query, page, perPage);\n    loader.classList.add(\"hidden\");\n\n    renderGallery(hits, true);\n\n    setTimeout(() => {\n        if (lastItemBeforeLoad) {\n            const firstNewItem = lastItemBeforeLoad.nextElementSibling;\n            if (firstNewItem) {\n                firstNewItem.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n            }\n        }\n    }, 300);\n\n    if (page * perPage >= totalHits) {\n        loadMoreBtn.classList.add(\"hidden\");\n        iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","response","axios","error","iziToast","lightbox","renderGallery","images","append","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","form","loadMoreBtn","loader","lastItemBeforeLoad","event","hits","totalHits","firstNewItem"],"mappings":"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"}